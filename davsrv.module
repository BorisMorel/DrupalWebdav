<?php

require_once(dirname(__FILE__).'/autoload.php');

define(DRUPAL_WEBDAV_URL, '/davsrv');
define(DOCUMENT_ROOT, '/sharing');
/**
 * Implementation of hook_menu
 */
function davsrv_menu() {
    $items = array (
        WEBDAV_ROOT => array (
            'page callback' => 'entry_point',
            'type' => MENU_CALLBACK,
            'access arguments' => array('access content'),
        ),
    );

    return $items;
}

function entry_point() {
    $server = ezcWebdavServer::getInstance();
    $backend = WebdavDrupalBackend::getInstance()
        ->setDrupalUrlRoot(DRUPAL_WEBDAV_URL)
        ->setDocumentRoot(DOCUMENT_ROOT)
        ;
    $server->handle($backend);
}
